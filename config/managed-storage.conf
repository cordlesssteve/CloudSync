# CloudSync Managed Storage Configuration
# This file controls the behavior of the CloudSync orchestrator

# =====================================
# Remote Storage Configuration
# =====================================

# Primary remote name (must match rclone remote)
REMOTE_NAME="onedrive"

# Remote path for managed storage
REMOTE_PATH="DevEnvironment/managed"

# =====================================
# Directory Organization
# =====================================

# Directories to manage with Git (small files, text files)
# These get full version history and are synced efficiently
GIT_DIRS="configs:documents:scripts"

# Directories to manage with Git-Annex (large files, binary files)
# These get version tracking with efficient storage
GIT_ANNEX_DIRS="projects:archives:media"

# =====================================
# File Size Thresholds
# =====================================

# Files larger than this go to Git-Annex (10MB default)
LARGE_FILE_THRESHOLD=$((10 * 1024 * 1024))

# Binary files larger than this go to Git-Annex even if under main threshold (1MB default)
BINARY_FILE_THRESHOLD=$((1 * 1024 * 1024))

# =====================================
# File Type Classification
# =====================================

# File extensions considered binary (Git-Annex candidates)
BINARY_EXTENSIONS="jpg|jpeg|png|gif|bmp|tiff|mp4|avi|mkv|mov|mp3|wav|flac|zip|tar|gz|7z|rar|exe|dmg|iso|pdf"

# File extensions considered text (Git candidates)
TEXT_EXTENSIONS="txt|md|py|js|ts|jsx|tsx|c|cpp|h|hpp|java|go|rs|sh|bash|zsh|json|xml|yaml|yml|toml|ini|conf|cfg|css|html|scss|sass"

# =====================================
# Git Configuration
# =====================================

# Git user information for managed storage commits
GIT_USER_NAME="CloudSync"
GIT_USER_EMAIL="cloudsync@local"

# Default branch for new repositories
GIT_DEFAULT_BRANCH="main"

# =====================================
# Operational Settings
# =====================================

# Enable verbose logging (true/false)
VERBOSE="false"

# Enable dry-run mode for testing (true/false)
DRY_RUN="false"

# Enable automatic sync on add operations (true/false)
AUTO_SYNC="false"

# Default copy mode for managed storage (move/copy/link)
DEFAULT_COPY_MODE="move"

# =====================================
# Git-Annex Configuration
# =====================================

# Git-Annex chunk size for large files
ANNEX_CHUNK_SIZE="50MiB"

# Git-Annex encryption (none/shared/hybrid/pubkey)
ANNEX_ENCRYPTION="none"

# Git-Annex numcopies (number of copies to maintain)
ANNEX_NUMCOPIES="2"

# =====================================
# Performance Settings
# =====================================

# Maximum concurrent operations
MAX_CONCURRENT_OPS="3"

# Bandwidth limit for transfers (empty for unlimited)
BANDWIDTH_LIMIT=""

# Retry attempts for failed operations
RETRY_ATTEMPTS="3"

# Timeout for individual operations (seconds)
OPERATION_TIMEOUT="300"

# =====================================
# Integration Settings
# =====================================

# Integration with existing CloudSync features
INTEGRATE_DEDUPLICATION="true"
INTEGRATE_HEALTH_MONITORING="true"
INTEGRATE_CONFLICT_RESOLUTION="true"

# Use existing rclone configuration
USE_EXISTING_RCLONE_CONFIG="true"

# =====================================
# Monitoring and Logging
# =====================================

# Log retention days
LOG_RETENTION_DAYS="30"

# Enable performance metrics
ENABLE_METRICS="true"

# Enable notification system
ENABLE_NOTIFICATIONS="false"

# Notification method (email/webhook/none)
NOTIFICATION_METHOD="none"

# =====================================
# Advanced Settings
# =====================================

# Custom decision engine rules file (optional)
CUSTOM_RULES_FILE=""

# Pre/post operation hooks directory
HOOKS_DIRECTORY=""

# Enable experimental features
EXPERIMENTAL_FEATURES="false"

# =====================================
# Environment-Specific Overrides
# =====================================

# These can be overridden by environment variables
# export CLOUDSYNC_VERBOSE=true
# export CLOUDSYNC_DRY_RUN=true
# export CLOUDSYNC_REMOTE_NAME=mydrive

# Override with environment if set
VERBOSE="${CLOUDSYNC_VERBOSE:-$VERBOSE}"
DRY_RUN="${CLOUDSYNC_DRY_RUN:-$DRY_RUN}"
REMOTE_NAME="${CLOUDSYNC_REMOTE_NAME:-$REMOTE_NAME}"
REMOTE_PATH="${CLOUDSYNC_REMOTE_PATH:-$REMOTE_PATH}"
AUTO_SYNC="${CLOUDSYNC_AUTO_SYNC:-$AUTO_SYNC}"

# =====================================
# Configuration Validation
# =====================================

# Version of this configuration format
CONFIG_VERSION="1.0"

# Last updated timestamp (auto-updated by scripts)
CONFIG_LAST_UPDATED="$(date -u +"%Y-%m-%dT%H:%M:%SZ")"

# Configuration checksum (for integrity verification)
# This will be calculated by the orchestrator on first load
CONFIG_CHECKSUM=""